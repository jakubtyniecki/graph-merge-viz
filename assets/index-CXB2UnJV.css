*{margin:0;padding:0;box-sizing:border-box}:root{--bg: #1a1a2e;--surface: #16213e;--surface-hover: #1a2745;--border: #2a3a5c;--text: #e0e0e0;--text-muted: #8892a4;--accent: #4fc3f7;--accent-hover: #29b6f6;--danger: #f44336;--success: #4caf50;--warning: #ff9800;--diff-added: #4CAF50;--diff-removed: #F44336;--diff-modified: #FF9800;--header-height: 48px;--action-bar-height: 40px;--status-bar-height: 24px;--gutter-size: 12px}html,body{height:100%;font-family:Segoe UI,system-ui,-apple-system,sans-serif;background:var(--bg);color:var(--text);overflow:hidden}body{display:flex;flex-direction:column}#app-header{height:var(--header-height);display:flex;align-items:center;justify-content:space-between;padding:0 16px;background:var(--surface);border-bottom:1px solid var(--border);flex-shrink:0}#app-header h1{font-size:16px;font-weight:600;color:var(--accent)}#header-controls{display:flex;align-items:center;gap:16px}.header-section{display:flex;align-items:center;gap:8px}.header-section-label{font-size:10px;color:var(--text-muted);text-transform:uppercase;letter-spacing:.5px;font-weight:600}.header-separator{width:1px;height:24px;background:var(--border);flex-shrink:0}#session-controls{display:flex;align-items:center;gap:8px}#session-controls select,#session-controls button,#layout-algo{font-size:12px}#app{display:flex;flex:1;min-height:0;overflow:hidden}.split-v{display:flex;flex-direction:row;flex:1;min-width:0;min-height:0}.split-h{display:flex;flex-direction:column;flex:1;min-width:0;min-height:0}.merge-gutter{position:relative;z-index:10;flex-shrink:0;background:var(--bg)}.split-v>.merge-gutter{width:var(--gutter-size)}.split-h>.merge-gutter{height:var(--gutter-size)}.merge-zone{position:absolute;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:2px;pointer-events:none;z-index:5}.split-v>.merge-gutter .merge-zone{left:50%;transform:translate(-50%)}.split-h>.merge-gutter .merge-zone{top:50%;transform:translateY(-50%);flex-direction:row}.resize-handle{position:absolute;border-radius:2px;background:var(--border);transition:background .15s;z-index:11}.resize-handle:hover{background:var(--accent)}.split-v>.merge-gutter .resize-handle{width:8px;height:40px;cursor:col-resize;top:8px;left:50%;transform:translate(-50%)}.split-h>.merge-gutter .resize-handle{width:40px;height:8px;cursor:row-resize;top:50%;left:8px;transform:translateY(-50%)}.merge-btn{font-size:10px;padding:6px 8px;min-height:44px;border-radius:3px;cursor:pointer;white-space:nowrap;pointer-events:auto;background:var(--surface);transition:opacity .15s,background .15s;font-weight:700;display:flex;align-items:center;gap:4px}.merge-btn-labels{display:flex;align-items:center;gap:3px;flex:1;overflow:hidden;min-width:0}.merge-btn-source,.merge-btn-target{font-size:9px;color:var(--text-muted);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:48px}.merge-btn-icon{font-size:15px;color:#fff!important;flex-shrink:0;font-weight:700;line-height:1}.merge-btn:hover{opacity:1}.merge-btn-allowed{color:var(--success);border-left:3px solid var(--success);border-top:1px solid var(--border);border-right:1px solid var(--border);border-bottom:1px solid var(--border)}.merge-btn-allowed:hover{background:#4caf5026}.merge-btn-blocked{color:var(--danger);border-left:3px solid var(--danger);border-top:1px solid var(--border);border-right:1px solid var(--border);border-bottom:1px solid var(--border);opacity:.8}.merge-btn-blocked:hover{opacity:1;background:#f443361a}.merge-btn-cross{color:#f9a825;border-left:3px solid #f9a825;border-top:1px solid var(--border);border-right:1px solid var(--border);border-bottom:1px solid var(--border)}.merge-btn-cross:hover{background:#f9a82526}.panel{position:relative;display:flex;flex-direction:column;border:1px solid var(--border);background:var(--surface);margin:4px;border-radius:6px;overflow:hidden;min-height:0}.panel-overlay{position:absolute;inset:0;background:#00000080;z-index:50}.panel-header{display:flex;align-items:center;justify-content:space-between;padding:4px 8px;background:#0003;border-bottom:1px solid var(--border);min-height:36px;flex-shrink:0}.panel-header-left,.panel-header-right{display:flex;align-items:center;gap:2px}.panel-header-sep{display:inline-block;width:1px;height:18px;background:var(--border);margin:0 3px}.panel-name-overlay{position:absolute;top:6px;left:8px;z-index:1;background:#00000073;color:var(--accent);padding:2px 8px;border-radius:4px;font-size:11px;font-weight:600;cursor:pointer;-webkit-user-select:none;user-select:none;min-width:44px;min-height:28px;display:flex;align-items:center}.panel-name-overlay:hover{background:#4fc3f733}.panel-info{font-size:11px;color:var(--text-muted)}.panel-info .merge-direction{color:var(--warning);font-weight:600}.panel-canvas{flex:1;min-height:0;position:relative}.panel-actions{display:flex;align-items:center;justify-content:space-between;gap:4px;padding:4px 8px;border-top:1px solid var(--border);background:#00000026;flex-wrap:wrap;min-height:var(--action-bar-height);flex-shrink:0}.panel-actions-left{display:flex;align-items:center;gap:4px}.panel-actions-right{display:flex;align-items:center;gap:4px;margin-left:auto}.action-separator{width:1px;height:20px;background:var(--border);margin:0 4px;flex-shrink:0}button{background:var(--surface-hover);color:var(--text);border:1px solid var(--border);border-radius:4px;padding:4px 10px;font-size:11px;cursor:pointer;transition:background .15s;white-space:nowrap}button:hover{background:var(--border)}button:active{transform:scale(.97)}.btn-add{background:#4fc3f726;border-color:var(--accent);color:var(--accent)}.btn-add:hover{background:#4fc3f74d}.btn-clear{background:#f4433626;border-color:var(--danger);color:var(--danger)}.btn-clear:hover{background:#f443364d}.btn-approve{background:#4caf5033;border-color:var(--success);color:var(--success)}.btn-approve:hover{background:#4caf5059}.btn-icon{padding:4px 8px;font-size:16px;min-width:32px}.btn-restore{background:#8a2be226;border-color:#8a2be2;color:#8a2be2}.btn-restore:hover{background:#8a2be24d}.panel-header-btns{display:flex;gap:4px;align-items:center}.panel-split-group,.panel-window-group{display:flex;gap:4px}.panel-split-btn,.panel-close-btn,.panel-zoom-btn{font-size:16px;padding:4px 8px;min-width:32px;line-height:1}.panel-zoom-btn:hover{background:#4fc3f733}.panel.zoomed{border-color:var(--accent)}.panel-close-btn{color:var(--danger);border-color:var(--danger)}.panel-close-btn:hover{background:#f4433633}.context-menu{position:fixed;z-index:1000;background:var(--surface);border:1px solid var(--border);border-radius:6px;padding:4px 0;min-width:180px;box-shadow:0 4px 12px #0006}.context-menu-item{display:block;width:100%;text-align:left;padding:8px 14px;border:none;border-radius:0;background:transparent;color:var(--text);font-size:13px;cursor:pointer}.context-menu-item:hover{background:var(--surface-hover)}.context-menu-item-disabled{opacity:.5;cursor:default;pointer-events:none;font-style:italic}.context-menu-separator{height:1px;background:var(--border);margin:4px 0}#toast-container{position:fixed;bottom:16px;right:16px;display:flex;flex-direction:column;gap:8px;z-index:1000}.toast{padding:10px 16px;border-radius:6px;font-size:13px;color:#fff;animation:toast-in .3s ease;max-width:320px}.toast-error{background:var(--danger)}.toast-success{background:var(--success)}.toast-info{background:var(--accent);color:#000}@keyframes toast-in{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}dialog{background:var(--surface);color:var(--text);border:1px solid var(--border);border-radius:8px;padding:16px;min-width:250px;max-width:350px;overflow:auto;overflow-wrap:break-word;word-wrap:break-word}dialog[open]{z-index:9999}dialog.dialog-wide{max-width:500px}dialog::backdrop{background:#000000bf}dialog.panel-dialog::backdrop{background:transparent}dialog h3{margin-bottom:12px;font-size:15px;color:var(--accent)}dialog label{display:block;margin-bottom:4px;font-size:12px;color:var(--text-muted)}dialog input,dialog select,dialog textarea{width:100%;padding:6px 10px;margin-bottom:10px;background:var(--bg);color:var(--text);border:1px solid var(--border);border-radius:4px;font-size:13px;font-family:inherit}dialog textarea{min-height:80px;resize:vertical}dialog .dialog-actions button{min-height:44px;padding:8px 16px}dialog .dialog-actions{display:flex;justify-content:flex-end;gap:8px;margin-top:12px}dialog .btn-primary{background:var(--accent);color:#000;border-color:var(--accent);font-weight:600}dialog .btn-primary:hover{background:var(--accent-hover)}.diff-legend{display:flex;gap:8px;font-size:10px}.diff-legend span:before{content:"";display:inline-block;width:8px;height:8px;border-radius:2px;margin-right:3px;vertical-align:middle}.legend-added:before{background:var(--diff-added)}.legend-removed:before{background:var(--diff-removed)}.legend-modified:before{background:var(--diff-modified)}.help-btn{font-size:14px;padding:4px 8px;border-radius:50%}.keyboard-help{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:var(--surface);border:1px solid var(--border);border-radius:8px;padding:20px;z-index:999;min-width:280px;display:none}.keyboard-help.visible{display:block}.keyboard-help h3{margin-bottom:10px;color:var(--accent)}.keyboard-help dl{display:grid;grid-template-columns:auto 1fr;gap:4px 12px;font-size:13px}.keyboard-help dt{color:var(--text-muted)}.keyboard-help kbd{background:var(--bg);padding:1px 6px;border-radius:3px;border:1px solid var(--border);font-size:11px}#status-bar{height:var(--status-bar-height);display:flex;align-items:center;justify-content:space-between;padding:0 16px;background:var(--surface);border-top:1px solid var(--border);font-size:11px;color:var(--text-muted);flex-shrink:0}#status-bar .status-left,#status-bar .status-right{display:flex;gap:16px}.diff-overlay{position:absolute;bottom:8px;left:8px;padding:4px 8px;background:#000000b3;border-radius:4px;font-size:10px;font-family:Courier New,monospace;color:var(--text);pointer-events:none;z-index:10;display:none}.diff-overlay.visible{display:block}.preview-canvas{flex:1;min-height:200px;background:var(--bg);border:1px solid var(--border);border-radius:6px;overflow:hidden;margin-bottom:0}dialog:has(.preview-header){display:flex;flex-direction:column;min-width:420px;min-height:380px}.preview-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px}.preview-footer{display:flex;align-items:center;gap:8px;padding-top:10px;border-top:1px solid var(--border);margin-top:8px}.preview-toggle{display:flex;flex:1;justify-content:center;gap:0;border:1px solid var(--border);border-radius:4px;overflow:hidden}.preview-toggle-btn{flex:1;padding:4px 10px;font-size:11px;background:var(--surface);color:var(--text-muted);border:none;border-radius:0;cursor:pointer;transition:background .15s,color .15s}.preview-toggle-btn:not(:last-child){border-right:1px solid var(--border)}.preview-toggle-btn.active{background:var(--accent);color:#fff}.preview-toggle-btn:disabled{opacity:.4;cursor:not-allowed}.changeset-summary-text{font-size:13px;line-height:1.6;color:var(--text);padding:12px;background:#00000026;border-radius:4px;border:1px solid var(--border);margin-bottom:12px;white-space:pre-wrap}.changelog-split{display:flex;gap:10px;min-height:200px}.changelog-split-list{flex:0 0 240px;overflow-y:auto;max-height:400px}.changelog-list{overflow-y:auto;border:1px solid var(--border);border-radius:4px;background:#0003}.changelog-entry{display:flex;align-items:center;justify-content:space-between;padding:6px 8px;border-bottom:1px solid var(--border);font-family:Courier New,monospace;font-size:11px}.changelog-entry:last-child{border-bottom:none}.changelog-entry.active{background:var(--surface-hover)}.changelog-entry-label{flex:1;margin-right:8px}dialog.changelog-with-preview{min-width:560px;max-width:90vw}.changelog-entry.diff-added{color:var(--diff-added)}.changelog-entry.diff-removed{color:var(--diff-removed)}.changelog-entry.diff-modified{color:var(--diff-modified)}.btn-preview{background:var(--surface-hover);color:var(--text);border:1px solid var(--border);border-radius:4px;cursor:pointer;transition:background .15s}.btn-preview:hover{background:var(--border)}.title-short{display:none}.dialog-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px;cursor:move;-webkit-user-select:none;user-select:none}.dialog-header h3{margin-bottom:0}.excl-toggle{padding:3px 8px;font-size:11px;font-family:Courier New,monospace;border-radius:3px;cursor:pointer;border:1px solid var(--border);min-height:unset}.excl-btn-included{background:#4caf5033;color:var(--diff-added);border-color:var(--diff-added)}.excl-btn-excluded{background:#f4433633;color:var(--diff-removed);border-color:var(--diff-removed)}.excl-btn-propagated{background:var(--surface);color:var(--text-muted);cursor:default;opacity:.7}.btn-close-icon{background:transparent;border:none;color:var(--text-muted);font-size:16px;padding:2px 6px;min-width:28px;line-height:1;cursor:pointer;border-radius:4px}.btn-close-icon:hover{color:var(--text);background:var(--surface-hover)}.session-menu-wrapper{position:relative}.session-dropdown{position:absolute;top:calc(100% + 4px);right:0;background:var(--surface);border:1px solid var(--border);border-radius:6px;padding:4px 0;z-index:50;box-shadow:0 4px 12px #0006;min-width:120px}.session-dropdown[hidden]{display:none}.session-dropdown button{display:block;width:100%;text-align:left;padding:8px 14px;border:none;border-radius:0;background:transparent;color:var(--text);font-size:13px;cursor:pointer;min-height:unset}.session-dropdown button:hover{background:var(--surface-hover)}.preview-info-panel{display:none;flex:1;padding:12px;overflow-y:auto;background:#00000026;border:1px solid var(--border);border-radius:6px}.preview-info-panel.visible{display:block}@media(max-width:600px){#app-header{flex-wrap:wrap;height:auto;min-height:var(--header-height);padding:4px 8px;gap:4px}.title-full{display:none}.title-short{display:inline}.header-section-label,.header-separator{display:none}#header-controls{gap:6px;flex-wrap:wrap}.header-section{gap:4px}.panel-actions{gap:2px;padding:2px 4px;min-height:34px}dialog{min-width:unset;max-width:calc(100vw - 24px);width:calc(100vw - 24px)}dialog:has(.preview-header){min-width:unset;min-height:unset;width:calc(100vw - 24px)}.merge-btn{font-size:9px;padding:4px 6px}button{min-height:36px}.panel-split-btn,.panel-close-btn,.panel-zoom-btn,.btn-icon{min-width:36px;min-height:36px}.session-dropdown button{min-height:unset}#toast-container{right:8px;bottom:8px;left:8px}.toast{max-width:100%}}#template-controls{display:flex;align-items:center;gap:8px}#template-controls select,#template-controls button{font-size:12px}.template-graph-type-label{font-size:12px;color:var(--text-muted);padding:4px 0 8px}.template-graph-type-label strong{color:var(--text)}.template-section-label{font-size:11px;color:var(--text-muted);text-transform:uppercase;letter-spacing:.5px;font-weight:600;margin:10px 0 4px}.type-row{display:flex;align-items:center;gap:6px;margin-bottom:4px}.type-label-input{flex:1;font-size:12px;background:var(--bg);border:1px solid var(--border);color:var(--text);padding:4px 6px;border-radius:3px}.type-color-input{width:32px;height:26px;border:1px solid var(--border);border-radius:3px;padding:1px;cursor:pointer;background:none}.btn-delete-type{background:none;border:none;color:var(--danger);cursor:pointer;font-size:14px;padding:2px 4px;line-height:1;border-radius:3px}.btn-delete-type:hover{background:#f4433626}.btn-add-type{font-size:11px;padding:3px 8px;margin-top:2px;margin-bottom:4px;background:var(--surface);border:1px solid var(--border);color:var(--text);border-radius:3px;cursor:pointer}.btn-add-type:hover{background:var(--surface-hover);border-color:var(--accent);color:var(--accent)}.menu-divider{margin:2px 0;border:none;border-top:1px solid var(--border)}.path-tooltip{position:absolute;background:#1a1a2e;border:1px solid var(--border);border-radius:4px;padding:4px 8px;font-size:11px;font-family:Courier New,monospace;color:var(--text);white-space:pre;pointer-events:none;z-index:100;display:none;max-width:240px}.tracking-overlay{position:absolute;bottom:4px;left:8px;z-index:10;background:#16213ed9;border:1px solid var(--border);border-radius:4px;padding:4px 8px;font-size:12px;color:var(--text)}.tracking-overlay label{display:flex;align-items:center;gap:6px;cursor:pointer}.tracking-overlay input[type=checkbox]{cursor:pointer}.exclusion-list{display:flex;flex-direction:column;gap:6px;max-height:200px;overflow-y:auto;margin:8px 0}.exclusion-item{display:flex;align-items:center;gap:8px;font-size:12px;font-family:Courier New,monospace}.exclusion-item input[type=checkbox]{width:auto;margin-bottom:0;cursor:pointer}.exclusion-item.propagated{color:var(--text-muted);font-style:italic}.special-types-section{margin-top:8px;padding-top:8px;border-top:1px solid var(--border)}.special-type-item{display:flex;align-items:center;gap:6px;margin-bottom:4px;font-size:12px}.special-type-item input[type=checkbox]{width:auto;margin-bottom:0;flex-shrink:0}.special-type-item button{padding:1px 4px;font-size:10px;min-height:unset;line-height:1.4}@keyframes tracking-pulse{0%{background:#4fc3f74d}to{background:transparent}}.tracking-flash{animation:tracking-pulse .3s ease}.panel-header-actions{display:flex;align-items:center;gap:2px;margin-left:8px}.btn-header-icon{font-size:14px;padding:2px 5px;min-width:28px;min-height:28px}.action-separator-sm{width:1px;height:16px;background:var(--border);margin:0 3px;flex-shrink:0}@media(max-width:600px){.btn-header-icon{min-width:36px;min-height:36px}}.template-list{max-height:300px;overflow-y:auto;margin:8px 0;border:1px solid var(--border);border-radius:4px}.template-list-item{display:flex;justify-content:space-between;align-items:center;padding:8px 12px;cursor:pointer;border-bottom:1px solid var(--border)}.template-list-item:last-child{border-bottom:none}.template-list-item:hover{background:var(--surface-hover)}.template-list-item.selected{background:#4fc3f726;border-left:3px solid var(--accent);padding-left:9px}.tpl-name{font-weight:600;font-size:13px}.tpl-meta{font-size:10px;color:var(--text-muted)}.template-modal-footer{display:flex;gap:6px;padding-top:8px;border-top:1px solid var(--border);flex-wrap:wrap}.approval-indicator{position:absolute;bottom:4px;right:8px;font-size:10px;color:var(--text-muted);opacity:.7;pointer-events:none;z-index:10;-webkit-user-select:none;user-select:none}.processing-indicator{display:none;font-size:14px;color:var(--accent);line-height:1;margin-left:2px}.panel.processing .processing-indicator{display:inline;animation:spin .8s linear infinite}@keyframes spin{to{transform:rotate(360deg)}}.merge-btn{display:flex;justify-content:space-between;align-items:center;gap:4px}.merge-strategy-badge{margin-left:auto;font-size:9px;opacity:.6;font-weight:400;flex-shrink:0}.merge-btn.merge-btn-disabled{background:#3a3a4a;color:#666;cursor:not-allowed;border-left:3px solid #555;border-top:1px solid var(--border);border-right:1px solid var(--border);border-bottom:1px solid var(--border)}.merge-btn.merge-btn-disabled:hover{background:#3a3a4a;opacity:1}.merge-btn.merge-btn-disabled .merge-btn-text{text-decoration:line-through}.merge-strategy-picker{background:var(--surface);border:1px solid var(--border);border-radius:6px;padding:4px 0;box-shadow:0 4px 12px #0006;min-width:120px}.strategy-option{padding:8px 14px;font-size:12px;color:var(--text);cursor:pointer}.strategy-option:hover{background:var(--surface-hover)}.strategy-option.active{color:var(--accent);font-weight:600}.strategy-separator{border:none;border-top:1px solid var(--border);margin:4px 0}.strategy-delete{color:#e05c5c}.merge-zone.merge-zone-flat{top:0;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:2px;padding:4px 0;overflow-y:auto;overflow-x:visible;scrollbar-width:none}.merge-zone.merge-zone-flat::-webkit-scrollbar{display:none}.split-h>.merge-gutter .merge-zone.merge-zone-flat{top:50%;height:auto;transform:translateY(-50%);flex-direction:row;left:0;width:100%;overflow-x:auto;overflow-y:visible;padding:0 4px;justify-content:center}.merge-btn-row{display:flex;align-items:center;gap:2px;pointer-events:auto}.merge-btn-row.dragging{opacity:.4}.merge-btn-drag{cursor:grab;color:var(--text-muted);padding:0 2px;font-size:11px;-webkit-user-select:none;user-select:none;pointer-events:auto;line-height:1}.merge-btn-drag:active{cursor:grabbing}.merge-gutter-settings{background:none;border:1px solid var(--border);color:var(--text-muted);border-radius:4px;padding:0;min-width:44px;min-height:44px;cursor:pointer;font-size:16px;margin-top:4px;pointer-events:auto;white-space:nowrap;display:flex;align-items:center;justify-content:center;flex-shrink:0}.merge-gutter-settings:hover{background:#5bb8f51a;color:var(--accent);border-color:var(--accent)}.mgmt-row{display:flex;align-items:center;gap:8px;padding:6px 4px;border-bottom:1px solid var(--border)}.mgmt-btn-label{flex:1;font-size:12px;font-family:Courier New,monospace}.mgmt-strat-select{font-size:11px;padding:2px 4px;width:auto}.mgmt-delete-btn{background:none;border:1px solid var(--danger);color:var(--danger);border-radius:4px;padding:2px 6px;cursor:pointer;font-size:12px;min-width:44px;min-height:32px}.mgmt-delete-btn:hover{background:#f443361a}
